line 122

+ #ifndef pid_t
+ typedef int pid_t;
+ #endif
+ #ifndef ssize_t
+ typedef long ssize_t;
+ #endif
+ #ifndef mode_t
+ typedef unsigned short mode_t;
+ #endif
+ 
+ /* Some defines for _access nAccessMode (MS doesn't define them, but
+  * it doesn't seem to hurt to add them). */
+ #define	F_OK	0	/* Check for file existence */
+ /* Well maybe it does hurt.  On newer versions of MSVCRT, an access mode
+    of 1 causes invalid parameter error. */   
+ #define	X_OK	1	/* MS access() doesn't check for execute permission. */
+ #define	W_OK	2	/* Check for write permission */
+ #define	R_OK	4	/* Check for read permission */

Types are necessary everywhere, but not declared in MSVC CRT.
Defines are declared in MinGW's io.h, but not in MSVC.

line 303

+ /*
+  * Constants for the stat st_mode member.
+  */
+ #define	_S_IFIFO	0x1000	/* FIFO */
+ #define	_S_IFCHR	0x2000	/* Character */
+ #define	_S_IFBLK	0x3000	/* Block: Is this ever set under w32? */
+ #define	_S_IFDIR	0x4000	/* Directory */
+ #define	_S_IFREG	0x8000	/* Regular */
+ 
+ #define	_S_IFMT		0xF000	/* File type mask */
+ 
+ #define	_S_IEXEC	0x0040
+ #define	_S_IWRITE	0x0080
+ #define	_S_IREAD	0x0100
+ 
+ #define	_S_IRWXU	(_S_IREAD | _S_IWRITE | _S_IEXEC)
+ #define	_S_IXUSR	_S_IEXEC
+ #define	_S_IWUSR	_S_IWRITE
+ #define	_S_IRUSR	_S_IREAD

line 327

+ #  define strdup(s) _strdup(s)

